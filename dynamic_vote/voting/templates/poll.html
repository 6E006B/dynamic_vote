{% extends "base.html" %}

{% block content %}
<form method="post">{% csrf_token %}
    <div class="row">
        <div class="col">
            <h4 class="">{{poll.title}}</h4>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p class="">{{poll.description}}</p>
        </div>
    </div>
    {% for option_struct in options_struct %}
    <div class="row no-gutters add-element-container">
        <!--<div class="col col-sm-auto">-->
            <!--<button type="button" class="btn btn-default btn-block" data-toggle="collapse" data-target="#details-{{option_struct.option.id}}"><i class="fa fa-list"></i></button>-->
        <!--</div>-->
        <div class="col col-10">
            <div type="submit" name="option" value="{{option_struct.option.id}}" class=" container btn {% if option_struct.score < 0 %}btn-warning{% elif option_struct.score == max_score %}btn-success{% else %}btn-info{% endif %} btn-block">
                <div class="row">
                    <div class="col col-1" style="text-align: left;">
                        <span class="badge badge-default badge-pill">{{option_struct.score}}</span>&nbsp;
                        {% if my_vote and option_struct.option == my_vote.option %}
                        <i class="fa fa-check"></i>&nbsp;
                        {% endif %}
                    </div>
                    <div class="col col-auto" style="text-align: left;">
                        {{option_struct.option.text}}&nbsp;
                    </div>
                    <div class="col col-auto" style="text-align: left;">
                        <small class="text-muted">
                            by {{option_struct.option.creator.username}}
                        </small>
                    </div>
                </div>
            </div>
        </div>
        {% if option_struct.option.creator == user %}
        <div class="col col-2">
            <button type="submit" name="delete" value="{{option_struct.option.id}}" class="btn btn-primary btn-block" style="width:100%; height: 100%">
                <i class="fa fa-remove" aria-hidden="true"></i> delete
            </button>
        </div>
        {% endif %}
    </div>
    {% endfor %}
    <div class="row no-gutters add-element-container">
        <div class="col col-sm-2 d-flex align-items-center" style="text-align: right;">
            <label for="add-element-input" style="width:100%;">Add element:&nbsp;</label>
        </div>
        <div class="col col-sm-8">
            <input id="add-element-input" type="text" name="add_element" class="form-control" placeholder="New element" />
        </div>
        <div class="col col-sm-2">
            <button type="submit" class="btn btn-primary btn-block" style="width:100%">
                <i class="fa fa-plus"></i> add
            </button>
        </div>
    </div>
</form>

{% endblock %}